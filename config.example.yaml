# Deckky Configuration Example with OBS WebSocket Integration
# This example demonstrates OBS controls alongside existing functionality

# OBS WebSocket connection settings
obs:
  host: "localhost"
  port: 4455
  password: ""  # Leave empty if no password is set

# Home Assistant WebSocket connection settings
homeassistant:
  host: "localhost"
  port: 8123
  access_token: ""  # Your long-lived access token from Home Assistant
  ssl: true  # Set to false if using HTTP instead of HTTPS

# Spatial group configuration
groups:
  # Main group: Left 7 columns (buttons 0-23 on XL)
  main:
    name: "Main Controls"
    buttons: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]
    pages:
      # Page 0: Productivity shortcuts
      0:
        name: "Productivity"
        buttons:
          0:
            type: hotkey
            keys: ["ctrl", "c"]
            label: "Copy"

          1:
            type: hotkey
            keys: ["ctrl", "v"]
            label: "Paste"

          2:
            type: hotkey
            keys: ["ctrl", "x"]
            label: "Cut"

          8:
            type: hotkey
            keys: ["ctrl", "z"]
            label: "Undo"

          9:
            type: hotkey
            keys: ["ctrl", "shift", "z"]
            label: "Redo"

          # Page navigation
          22:
            type: page_switch
            page: 1
            label: "OBS\n>"

          23:
            type: page_switch
            page: 2
            label: "More\n>"

      # Page 1: OBS Scene Controls
      1:
        name: "OBS Scenes"
        buttons:
          0:
            type: obs
            action: scene_switch
            scene: "Starting Soon"
            label: "Starting\nSoon"

          1:
            type: obs
            action: scene_switch
            scene: "Main"
            label: "Main\nScene"

          2:
            type: obs
            action: scene_switch
            scene: "Break"
            label: "Break\nScene"

          3:
            type: obs
            action: scene_switch
            scene: "Ending"
            label: "Ending\nScene"

          8:
            type: obs
            action: start_recording
            label: "Start\nRecord"

          9:
            type: obs
            action: stop_recording
            label: "Stop\nRecord"

          10:
            type: obs
            action: start_streaming
            label: "Start\nStream"

          11:
            type: obs
            action: stop_streaming
            label: "Stop\nStream"

          # Back to productivity
          22:
            type: page_switch
            page: 0
            label: "< Back"

          23:
            type: page_switch
            page: 2
            label: "More\n>"

      # Page 2: Additional controls
      2:
        name: "More Controls"
        buttons:
          0:
            type: hotkey
            keys: ["super", "return"]
            label: "Terminal"

          1:
            type: hotkey
            keys: ["super", "b"]
            label: "Browser"

          2:
            type: hotkey
            keys: ["super", "f"]
            label: "File\nManager"

          # Back to productivity
          22:
            type: page_switch
            page: 0
            label: "< Back"

          # Back to OBS
          23:
            type: page_switch
            page: 1
            label: "< OBS"

  # Stable group: Right column (buttons 24-31)
  stable:
    name: "Stable Controls"
    buttons: [24, 25, 26, 27, 28, 29, 30, 31]
    pages:
      # Page 0: Volume controls (default)
      0:
        name: "Volume"
        buttons:
          24:
            type: volume
            action: display

          25:
            type: volume
            action: increase
            amount: 5
            label: "Vol +"

          26:
            type: volume
            action: decrease
            amount: 5
            label: "Vol -"

          27:
            type: volume
            action: mute
            label: "Mute"

          # Quick OBS controls
          28:
            type: obs
            action: start_recording
            label: "Rec\nStart"

          29:
            type: obs
            action: stop_recording
            label: "Rec\nStop"

          30:
            type: obs
            action: scene_switch
            scene: "Main"
            label: "Main\nScene"

          31:
            type: page_switch
            page: 1
            label: "Lights\n>"

      # Page 1: Discord controls
      1:
        name: "Discord"
        buttons:
          24:
            type: discord
            action: push_to_talk
            key: "ctrl+shift+p"
            label: "PTT"

          25:
            type: discord
            action: mute
            key: "ctrl+shift+m"
            label: "Mute"

          26:
            type: discord
            action: deafen
            key: "ctrl+shift+d"
            label: "Deafen"

          # Back to volume page
          31:
            type: page_switch
            page: 0
            label: "< Vol"

      # Page 2: Home Assistant lights
      2:
        name: "Lights"
        buttons:
          24:
            type: homeassistant
            action: toggle_light
            entity_id: "light.living_room_main"
            label: "Living\nRoom"

          25:
            type: homeassistant
            action: toggle_light
            entity_id: "light.bedroom_main"
            label: "Bedroom"

          26:
            type: homeassistant
            action: toggle_light
            entity_id: "light.kitchen_main"
            label: "Kitchen"

          27:
            type: homeassistant
            action: turn_on_light
            entity_id: "light.all_lights"
            label: "All\nOn"

          28:
            type: homeassistant
            action: turn_off_light
            entity_id: "light.all_lights"
            label: "All\nOff"

          # Back to volume page
          31:
            type: page_switch
            page: 0
            label: "< Vol"

# Stream Deck settings
streamdeck:
  brightness: 40  # 0-100
  page_timeout: 0  # Seconds before returning to page 0 (0 = disabled)
  font_paths:  # Optional: Custom font paths (will try in order)
    - "/home/sigurs/.local/share/fonts/FiraCodeSigurs/FiraCodeSigurs-SemiBold.ttf"

# OBS Configuration Notes:
# 1. Make sure OBS WebSocket is enabled in OBS (Tools > WebSocket Server Settings)
# 2. Default port is 4455 for OBS 29+
# 3. Set password in OBS if you want authentication
# 4. Scene names must match exactly what's in OBS (case-sensitive)
# 5. OBS controls work even if OBS is not running - errors will be logged to stdout

# Available OBS Actions:
# - scene_switch: Switch to a specific scene (requires 'scene' parameter)
# - start_recording: Start recording in OBS
# - stop_recording: Stop recording in OBS
# - start_streaming: Start streaming in OBS
# - stop_streaming: Stop streaming in OBS

# Home Assistant Configuration Notes:
# 1. Create a long-lived access token in Home Assistant (Profile > Scroll down > Long-Lived Access Tokens)
# 2. Default port is 8123 for Home Assistant
# 3. Set ssl to false if using HTTP instead of HTTPS
# 4. Entity IDs must match exactly what's in Home Assistant (case-sensitive)
# 5. Light controls work even if Home Assistant is not running - errors will be logged to stdout

# Available Home Assistant Actions:
# - toggle_light: Toggle a light on/off (requires 'entity_id' parameter)
# - turn_on_light: Turn on a light (requires 'entity_id' parameter)
# - turn_off_light: Turn off a light (requires 'entity_id' parameter)
